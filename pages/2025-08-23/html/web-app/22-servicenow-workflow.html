<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ServiceNow - Workflow Automation Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8f9fa;
            color: #2c3e50;
            font-size: 12px;
            line-height: 1.4;
        }

        .app-container {
            display: flex;
            height: 100vh;
        }

        /* Header */
        .top-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 44px;
            background: #2c5282;
            color: white;
            display: flex;
            align-items: center;
            padding: 0 16px;
            z-index: 1000;
            border-bottom: 1px solid #2a4b7a;
        }

        .header-brand {
            display: flex;
            align-items: center;
            margin-right: 24px;
        }

        .servicenow-logo {
            width: 24px;
            height: 24px;
            background: #81c784;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 8px;
            font-size: 14px;
            color: white;
            font-weight: bold;
        }

        .header-nav {
            display: flex;
            gap: 20px;
            flex: 1;
        }

        .header-nav a {
            color: rgba(255,255,255,0.9);
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 13px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .header-nav a.active,
        .header-nav a:hover {
            background: rgba(255,255,255,0.15);
            color: white;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-search {
            background: rgba(255,255,255,0.15);
            border: 1px solid rgba(255,255,255,0.2);
            padding: 6px 12px;
            border-radius: 4px;
            color: white;
            font-size: 12px;
            width: 200px;
        }

        .header-search::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .user-menu {
            width: 28px;
            height: 28px;
            border-radius: 14px;
            background: #81c784;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: #34495e;
            color: white;
            padding-top: 44px;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 16px;
            border-bottom: 1px solid #455a75;
        }

        .instance-selector {
            width: 100%;
            background: #455a75;
            border: 1px solid #5a6d84;
            color: white;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
        }

        .sidebar-nav {
            padding: 8px 0;
        }

        .nav-section {
            margin-bottom: 16px;
        }

        .nav-section-title {
            padding: 8px 16px;
            font-size: 11px;
            font-weight: 600;
            color: #bdc3c7;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .nav-items {
            list-style: none;
        }

        .nav-items li {
            margin-bottom: 1px;
        }

        .nav-items a {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            color: #ecf0f1;
            text-decoration: none;
            font-size: 12px;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .nav-items a:hover {
            background: #455a75;
            color: white;
        }

        .nav-items a.active {
            background: #2c5282;
            border-left-color: #81c784;
            color: white;
        }

        .nav-icon {
            width: 16px;
            height: 16px;
            margin-right: 8px;
            opacity: 0.8;
        }

        .nav-badge {
            margin-left: auto;
            background: #e74c3c;
            color: white;
            padding: 1px 6px;
            border-radius: 8px;
            font-size: 9px;
            font-weight: 500;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding-top: 44px;
            display: flex;
            flex-direction: column;
            background: white;
        }

        .content-header {
            background: white;
            padding: 16px 24px;
            border-bottom: 1px solid #e0e6ed;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .breadcrumb {
            font-size: 11px;
            color: #6c757d;
            margin-bottom: 4px;
        }

        .breadcrumb a {
            color: #2c5282;
            text-decoration: none;
        }

        .content-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
        }

        .content-actions {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .btn {
            padding: 6px 12px;
            border: 1px solid #d1d5db;
            background: white;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .btn:hover {
            background: #f8f9fa;
            border-color: #9ca3af;
        }

        .btn-primary {
            background: #2c5282;
            color: white;
            border-color: #2c5282;
        }

        .btn-primary:hover {
            background: #2a4b7a;
        }

        /* Workflow Canvas */
        .workflow-container {
            flex: 1;
            display: flex;
            background: #f8f9fa;
        }

        .workflow-canvas {
            flex: 1;
            position: relative;
            background: 
                radial-gradient(circle, #e0e6ed 1px, transparent 1px);
            background-size: 20px 20px;
            overflow: auto;
            padding: 40px;
        }

        .workflow-stage {
            position: absolute;
            background: white;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            padding: 16px;
            min-width: 200px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            cursor: move;
            user-select: none;
        }

        .workflow-stage.active {
            border-color: #2c5282;
            box-shadow: 0 4px 12px rgba(44,82,130,0.15);
        }

        .workflow-stage.completed {
            border-color: #16a085;
            background: #e8f8f5;
        }

        .workflow-stage.pending {
            border-color: #f39c12;
            background: #fef9e7;
        }

        .workflow-stage.error {
            border-color: #e74c3c;
            background: #fdf2f2;
        }

        .stage-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }

        .stage-icon {
            width: 24px;
            height: 24px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 8px;
            font-size: 12px;
            font-weight: 600;
        }

        .stage-icon.start {
            background: #16a085;
            color: white;
        }

        .stage-icon.approval {
            background: #f39c12;
            color: white;
        }

        .stage-icon.task {
            background: #3498db;
            color: white;
        }

        .stage-icon.end {
            background: #95a5a6;
            color: white;
        }

        .stage-title {
            font-size: 13px;
            font-weight: 600;
            color: #2c3e50;
        }

        .stage-status {
            margin-left: auto;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: 500;
        }

        .status-completed {
            background: #d5f4e6;
            color: #0d8043;
        }

        .status-active {
            background: #dbeafe;
            color: #1e40af;
        }

        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }

        .stage-details {
            font-size: 11px;
            color: #6c757d;
            line-height: 1.4;
        }

        .stage-assignee {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-top: 8px;
            font-size: 11px;
        }

        .assignee-avatar {
            width: 20px;
            height: 20px;
            border-radius: 10px;
            background: #2c5282;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            font-weight: 500;
        }

        /* Workflow Connections */
        .connection-line {
            position: absolute;
            height: 2px;
            background: #9ca3af;
            z-index: 1;
        }

        .connection-arrow {
            position: absolute;
            right: -6px;
            top: -3px;
            width: 0;
            height: 0;
            border-left: 6px solid #9ca3af;
            border-top: 4px solid transparent;
            border-bottom: 4px solid transparent;
        }

        /* Properties Panel */
        .properties-panel {
            width: 280px;
            background: white;
            border-left: 1px solid #e0e6ed;
            padding: 20px;
            overflow-y: auto;
        }

        .properties-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #2c3e50;
        }

        .property-group {
            margin-bottom: 20px;
        }

        .property-label {
            font-size: 11px;
            font-weight: 600;
            color: #6c757d;
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .property-value {
            font-size: 12px;
            color: #2c3e50;
            margin-bottom: 12px;
        }

        .property-input {
            width: 100%;
            padding: 6px 8px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 12px;
            background: white;
        }

        .property-select {
            width: 100%;
            padding: 6px 8px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 12px;
            background: white;
        }

        .property-textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 12px;
            background: white;
            min-height: 60px;
            resize: vertical;
        }

        .workflow-metrics {
            background: #f8f9fa;
            padding: 16px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 11px;
        }

        .metric-label {
            color: #6c757d;
        }

        .metric-value {
            color: #2c3e50;
            font-weight: 500;
        }

        /* Toolbar */
        .workflow-toolbar {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            gap: 8px;
            background: white;
            padding: 8px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .toolbar-btn {
            padding: 6px 8px;
            background: none;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .toolbar-btn:hover {
            background: #f8f9fa;
        }

        .toolbar-btn.active {
            background: #2c5282;
            color: white;
            border-color: #2c5282;
        }
    </style>
</head>
<body>
    <div class="top-header">
        <div class="header-brand">
            <div class="servicenow-logo">SN</div>
            <span>ServiceNow</span>
        </div>
        <div class="header-nav">
            <a href="#" class="active">üîÑ Workflows</a>
            <a href="#">üìã Process Designer</a>
            <a href="#">üîß Flow Designer</a>
            <a href="#">üìä Analytics</a>
            <a href="#">‚öôÔ∏è Administration</a>
        </div>
        <div class="header-right">
            <input type="text" class="header-search" placeholder="Search workflows...">
            <button class="btn">üîî</button>
            <div class="user-menu">AD</div>
        </div>
    </div>

    <div class="app-container">
        <div class="sidebar">
            <div class="sidebar-header">
                <select class="instance-selector">
                    <option>Production Instance</option>
                    <option>Development Instance</option>
                    <option>Test Instance</option>
                </select>
            </div>
            <div class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Workflow Management</div>
                    <ul class="nav-items">
                        <li><a href="#" class="active">üîÑ Active Workflows <span class="nav-badge">12</span></a></li>
                        <li><a href="#">üìù Draft Workflows</a></li>
                        <li><a href="#">‚úÖ Completed Workflows</a></li>
                        <li><a href="#">‚è∏Ô∏è Paused Workflows</a></li>
                        <li><a href="#">‚ùå Failed Workflows <span class="nav-badge">3</span></a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">Process Design</div>
                    <ul class="nav-items">
                        <li><a href="#">üé® Flow Designer</a></li>
                        <li><a href="#">üîß Workflow Editor</a></li>
                        <li><a href="#">üìã Process Templates</a></li>
                        <li><a href="#">üîó Integration Hub</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">Automation</div>
                    <ul class="nav-items">
                        <li><a href="#">ü§ñ Business Rules</a></li>
                        <li><a href="#">‚è∞ Scheduled Jobs</a></li>
                        <li><a href="#">üéØ Event Management</a></li>
                        <li><a href="#">üìß Notification Rules</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">Monitoring</div>
                    <ul class="nav-items">
                        <li><a href="#">üìä Workflow Analytics</a></li>
                        <li><a href="#">üîç Execution History</a></li>
                        <li><a href="#">‚ö†Ô∏è Error Logs</a></li>
                        <li><a href="#">üìà Performance Metrics</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="content-header">
                <div>
                    <div class="breadcrumb">
                        <a href="#">Home</a> > <a href="#">Workflows</a> > Employee Onboarding Process
                    </div>
                    <h1 class="content-title">Employee Onboarding Workflow</h1>
                </div>
                <div class="content-actions">
                    <button class="btn">üíæ Save</button>
                    <button class="btn">‚ñ∂Ô∏è Run Test</button>
                    <button class="btn">üìã Version History</button>
                    <button class="btn btn-primary">üöÄ Publish</button>
                </div>
            </div>

            <div class="workflow-container">
                <div class="workflow-canvas" id="workflowCanvas">
                    <div class="workflow-toolbar">
                        <button class="toolbar-btn active" onclick="setTool('select')">üëÜ Select</button>
                        <button class="toolbar-btn" onclick="setTool('add')">‚ûï Add Stage</button>
                        <button class="toolbar-btn" onclick="setTool('connect')">üîó Connect</button>
                        <button class="toolbar-btn" onclick="setTool('delete')">üóëÔ∏è Delete</button>
                        <button class="toolbar-btn" onclick="zoomIn()">üîç+</button>
                        <button class="toolbar-btn" onclick="zoomOut()">üîç-</button>
                    </div>

                    <!-- Workflow Stages -->
                    <div class="workflow-stage completed" style="top: 100px; left: 100px;" onclick="selectStage(this, 'start')">
                        <div class="stage-header">
                            <div class="stage-icon start">‚ñ∂Ô∏è</div>
                            <div class="stage-title">Start Process</div>
                            <div class="stage-status status-completed">Completed</div>
                        </div>
                        <div class="stage-details">
                            New employee information received from HR system
                        </div>
                        <div class="stage-assignee">
                            <div class="assignee-avatar">HR</div>
                            <span>HR System</span>
                        </div>
                    </div>

                    <div class="workflow-stage completed" style="top: 100px; left: 380px;" onclick="selectStage(this, 'approval1')">
                        <div class="stage-header">
                            <div class="stage-icon approval">‚úì</div>
                            <div class="stage-title">Manager Approval</div>
                            <div class="stage-status status-completed">Completed</div>
                        </div>
                        <div class="stage-details">
                            Direct manager approves new employee onboarding request
                        </div>
                        <div class="stage-assignee">
                            <div class="assignee-avatar">JM</div>
                            <span>John Manager</span>
                        </div>
                    </div>

                    <div class="workflow-stage active" style="top: 100px; left: 660px;" onclick="selectStage(this, 'task1')">
                        <div class="stage-header">
                            <div class="stage-icon task">üìã</div>
                            <div class="stage-title">IT Setup Tasks</div>
                            <div class="stage-status status-active">In Progress</div>
                        </div>
                        <div class="stage-details">
                            Create accounts, assign hardware, setup email and system access
                        </div>
                        <div class="stage-assignee">
                            <div class="assignee-avatar">IT</div>
                            <span>IT Support Team</span>
                        </div>
                    </div>

                    <div class="workflow-stage pending" style="top: 280px; left: 380px;" onclick="selectStage(this, 'task2')">
                        <div class="stage-header">
                            <div class="stage-icon task">üè¢</div>
                            <div class="stage-title">Facility Preparation</div>
                            <div class="stage-status status-pending">Pending</div>
                        </div>
                        <div class="stage-details">
                            Prepare workspace, assign parking, order business cards
                        </div>
                        <div class="stage-assignee">
                            <div class="assignee-avatar">FM</div>
                            <span>Facilities Team</span>
                        </div>
                    </div>

                    <div class="workflow-stage pending" style="top: 280px; left: 660px;" onclick="selectStage(this, 'task3')">
                        <div class="stage-header">
                            <div class="stage-icon task">üìö</div>
                            <div class="stage-title">Training Assignment</div>
                            <div class="stage-status status-pending">Pending</div>
                        </div>
                        <div class="stage-details">
                            Assign mandatory training courses and orientation schedule
                        </div>
                        <div class="stage-assignee">
                            <div class="assignee-avatar">LT</div>
                            <span>Learning Team</span>
                        </div>
                    </div>

                    <div class="workflow-stage pending" style="top: 460px; left: 520px;" onclick="selectStage(this, 'approval2')">
                        <div class="stage-header">
                            <div class="stage-icon approval">‚úì</div>
                            <div class="stage-title">Final Review</div>
                            <div class="stage-status status-pending">Pending</div>
                        </div>
                        <div class="stage-details">
                            HR reviews all completed tasks before employee start date
                        </div>
                        <div class="stage-assignee">
                            <div class="assignee-avatar">HR</div>
                            <span>HR Business Partner</span>
                        </div>
                    </div>

                    <div class="workflow-stage pending" style="top: 640px; left: 520px;" onclick="selectStage(this, 'end')">
                        <div class="stage-header">
                            <div class="stage-icon end">üèÅ</div>
                            <div class="stage-title">Process Complete</div>
                            <div class="stage-status status-pending">Pending</div>
                        </div>
                        <div class="stage-details">
                            Employee successfully onboarded and ready to start
                        </div>
                        <div class="stage-assignee">
                            <div class="assignee-avatar">SY</div>
                            <span>System</span>
                        </div>
                    </div>

                    <!-- Connection Lines -->
                    <div class="connection-line" style="top: 140px; left: 320px; width: 40px;">
                        <div class="connection-arrow"></div>
                    </div>
                    <div class="connection-line" style="top: 140px; left: 600px; width: 40px;">
                        <div class="connection-arrow"></div>
                    </div>
                    <div class="connection-line" style="top: 200px; left: 720px; width: 2px; height: 60px; transform-origin: top; transform: rotate(90deg);">
                    </div>
                    <div class="connection-line" style="top: 320px; left: 600px; width: 40px;">
                        <div class="connection-arrow"></div>
                    </div>
                    <div class="connection-line" style="top: 380px; left: 440px; width: 2px; height: 60px; transform-origin: top; transform: rotate(90deg);">
                    </div>
                    <div class="connection-line" style="top: 500px; left: 580px; width: 2px; height: 120px; transform-origin: top; transform: rotate(90deg);">
                    </div>
                </div>

                <div class="properties-panel">
                    <h3 class="properties-title">Stage Properties</h3>
                    
                    <div class="workflow-metrics">
                        <div class="metric-item">
                            <span class="metric-label">Total Stages:</span>
                            <span class="metric-value">7</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Completed:</span>
                            <span class="metric-value">2</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">In Progress:</span>
                            <span class="metric-value">1</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Pending:</span>
                            <span class="metric-value">4</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Avg Duration:</span>
                            <span class="metric-value">3.2 days</span>
                        </div>
                    </div>

                    <div class="property-group" id="stageProperties">
                        <div class="property-label">Stage Name</div>
                        <input type="text" class="property-input" value="IT Setup Tasks" id="stageName">
                        
                        <div class="property-label" style="margin-top: 12px;">Stage Type</div>
                        <select class="property-select" id="stageType">
                            <option value="task">Task</option>
                            <option value="approval">Approval</option>
                            <option value="automated">Automated</option>
                            <option value="condition">Condition</option>
                        </select>
                        
                        <div class="property-label" style="margin-top: 12px;">Assignee</div>
                        <select class="property-select" id="stageAssignee">
                            <option value="it-team">IT Support Team</option>
                            <option value="hr-team">HR Team</option>
                            <option value="facilities">Facilities Team</option>
                            <option value="learning">Learning Team</option>
                        </select>
                        
                        <div class="property-label" style="margin-top: 12px;">Due Date</div>
                        <input type="date" class="property-input" id="stageDueDate">
                        
                        <div class="property-label" style="margin-top: 12px;">Priority</div>
                        <select class="property-select" id="stagePriority">
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                            <option value="critical">Critical</option>
                        </select>
                        
                        <div class="property-label" style="margin-top: 12px;">Description</div>
                        <textarea class="property-textarea" id="stageDescription" placeholder="Enter stage description...">Create accounts, assign hardware, setup email and system access</textarea>
                        
                        <div class="property-label" style="margin-top: 12px;">Conditions</div>
                        <textarea class="property-textarea" id="stageConditions" placeholder="Enter conditions for stage execution..."></textarea>
                        
                        <div style="margin-top: 16px;">
                            <button class="btn btn-primary" style="width: 100%;" onclick="updateStage()">üíæ Update Stage</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedStage = null;
        let currentTool = 'select';
        let zoomLevel = 1;

        const stageData = {
            'start': {
                name: 'Start Process',
                type: 'automated',
                assignee: 'system',
                description: 'New employee information received from HR system',
                status: 'completed'
            },
            'approval1': {
                name: 'Manager Approval',
                type: 'approval',
                assignee: 'john-manager',
                description: 'Direct manager approves new employee onboarding request',
                status: 'completed'
            },
            'task1': {
                name: 'IT Setup Tasks',
                type: 'task',
                assignee: 'it-team',
                description: 'Create accounts, assign hardware, setup email and system access',
                status: 'active'
            },
            'task2': {
                name: 'Facility Preparation',
                type: 'task',
                assignee: 'facilities',
                description: 'Prepare workspace, assign parking, order business cards',
                status: 'pending'
            },
            'task3': {
                name: 'Training Assignment',
                type: 'task',
                assignee: 'learning',
                description: 'Assign mandatory training courses and orientation schedule',
                status: 'pending'
            },
            'approval2': {
                name: 'Final Review',
                type: 'approval',
                assignee: 'hr-bp',
                description: 'HR reviews all completed tasks before employee start date',
                status: 'pending'
            },
            'end': {
                name: 'Process Complete',
                type: 'automated',
                assignee: 'system',
                description: 'Employee successfully onboarded and ready to start',
                status: 'pending'
            }
        };

        function selectStage(element, stageId) {
            // Remove active class from all stages
            document.querySelectorAll('.workflow-stage').forEach(stage => {
                stage.classList.remove('stage-selected');
                stage.style.transform = 'scale(1)';
            });
            
            // Add active class to selected stage
            element.classList.add('stage-selected');
            element.style.transform = 'scale(1.02)';
            
            selectedStage = stageId;
            loadStageProperties(stageId);
        }

        function loadStageProperties(stageId) {
            const stage = stageData[stageId];
            if (!stage) return;
            
            document.getElementById('stageName').value = stage.name;
            document.getElementById('stageType').value = stage.type;
            document.getElementById('stageAssignee').value = stage.assignee;
            document.getElementById('stageDescription').value = stage.description;
        }

        function updateStage() {
            if (!selectedStage) {
                alert('Please select a stage first');
                return;
            }
            
            const stage = stageData[selectedStage];
            stage.name = document.getElementById('stageName').value;
            stage.type = document.getElementById('stageType').value;
            stage.assignee = document.getElementById('stageAssignee').value;
            stage.description = document.getElementById('stageDescription').value;
            
            // Update the stage display
            const stageElement = document.querySelector(`.workflow-stage.stage-selected .stage-title`);
            if (stageElement) {
                stageElement.textContent = stage.name;
            }
            
            const stageDescription = document.querySelector(`.workflow-stage.stage-selected .stage-details`);
            if (stageDescription) {
                stageDescription.textContent = stage.description;
            }
            
            alert('Stage updated successfully!');
        }

        function setTool(tool) {
            currentTool = tool;
            
            // Update toolbar button states
            document.querySelectorAll('.toolbar-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            event.target.classList.add('active');
            
            // Update cursor based on tool
            const canvas = document.getElementById('workflowCanvas');
            switch(tool) {
                case 'select':
                    canvas.style.cursor = 'default';
                    break;
                case 'add':
                    canvas.style.cursor = 'crosshair';
                    break;
                case 'connect':
                    canvas.style.cursor = 'cell';
                    break;
                case 'delete':
                    canvas.style.cursor = 'not-allowed';
                    break;
            }
        }

        function zoomIn() {
            zoomLevel = Math.min(zoomLevel + 0.1, 2);
            applyZoom();
        }

        function zoomOut() {
            zoomLevel = Math.max(zoomLevel - 0.1, 0.5);
            applyZoom();
        }

        function applyZoom() {
            const canvas = document.getElementById('workflowCanvas');
            canvas.style.transform = `scale(${zoomLevel})`;
            canvas.style.transformOrigin = 'top left';
        }

        // Drag and drop functionality
        let isDragging = false;
        let dragOffset = { x: 0, y: 0 };
        let dragElement = null;

        document.addEventListener('mousedown', function(e) {
            if (e.target.closest('.workflow-stage') && currentTool === 'select') {
                isDragging = true;
                dragElement = e.target.closest('.workflow-stage');
                const rect = dragElement.getBoundingClientRect();
                const canvasRect = document.getElementById('workflowCanvas').getBoundingClientRect();
                dragOffset.x = e.clientX - rect.left;
                dragOffset.y = e.clientY - rect.top;
                dragElement.style.zIndex = '1000';
            }
        });

        document.addEventListener('mousemove', function(e) {
            if (isDragging && dragElement) {
                const canvasRect = document.getElementById('workflowCanvas').getBoundingClientRect();
                const newLeft = e.clientX - canvasRect.left - dragOffset.x;
                const newTop = e.clientY - canvasRect.top - dragOffset.y;
                
                dragElement.style.left = Math.max(0, newLeft) + 'px';
                dragElement.style.top = Math.max(0, newTop) + 'px';
            }
        });

        document.addEventListener('mouseup', function(e) {
            if (isDragging && dragElement) {
                dragElement.style.zIndex = 'auto';
                isDragging = false;
                dragElement = null;
            }
        });

        // Auto-save functionality
        setInterval(() => {
            console.log('Auto-saving workflow...');
            // Simulate auto-save
        }, 30000);

        // Real-time updates simulation
        setInterval(() => {
            // Simulate stage status updates
            const stages = document.querySelectorAll('.workflow-stage');
            stages.forEach(stage => {
                if (Math.random() > 0.95) {
                    const statusEl = stage.querySelector('.stage-status');
                    if (statusEl.textContent === 'Pending') {
                        statusEl.textContent = 'In Progress';
                        statusEl.className = 'stage-status status-active';
                        stage.className = 'workflow-stage active';
                    }
                }
            });
        }, 10000);

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ServiceNow Workflow Designer loaded');
            // Select first stage by default
            const firstStage = document.querySelector('.workflow-stage');
            if (firstStage) {
                selectStage(firstStage, 'start');
            }
        });
    </script>
</body>
</html>