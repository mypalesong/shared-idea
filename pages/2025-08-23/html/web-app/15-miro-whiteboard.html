<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collaborative Board - Miro Style</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f5f5f5;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: #fff;
            border-bottom: 1px solid #e0e0e0;
            padding: 8px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 60px;
            z-index: 1000;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .logo {
            font-size: 24px;
            font-weight: 700;
            color: #050038;
        }
        
        .board-title {
            font-size: 16px;
            font-weight: 600;
            color: #050038;
            background: none;
            border: none;
            outline: none;
            min-width: 200px;
            padding: 4px 8px;
            border-radius: 4px;
        }
        
        .board-title:hover {
            background: #f0f0f0;
        }
        
        .header-center {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .zoom-controls {
            background: #fff;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            padding: 2px;
        }
        
        .zoom-btn {
            background: none;
            border: none;
            padding: 6px 8px;
            cursor: pointer;
            font-size: 14px;
            color: #666;
            border-radius: 6px;
            transition: background 0.2s;
        }
        
        .zoom-btn:hover {
            background: #f0f0f0;
        }
        
        .zoom-level {
            padding: 6px 12px;
            font-size: 14px;
            color: #333;
            min-width: 60px;
            text-align: center;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .share-btn {
            background: #4262ff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .share-btn:hover {
            background: #3651e6;
        }
        
        .collaborator {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 600;
            margin-left: -4px;
            border: 2px solid white;
            cursor: pointer;
        }
        
        .main-container {
            flex: 1;
            display: flex;
            position: relative;
            overflow: hidden;
        }
        
        .toolbar {
            position: absolute;
            top: 20px;
            left: 20px;
            background: white;
            border-radius: 12px;
            padding: 8px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .tool-item {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: none;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            color: #666;
            transition: all 0.2s;
        }
        
        .tool-item:hover {
            background: #f0f0f0;
        }
        
        .tool-item.active {
            background: #4262ff;
            color: white;
        }
        
        .tool-separator {
            width: 24px;
            height: 1px;
            background: #e0e0e0;
            margin: 4px auto;
        }
        
        .canvas-container {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: #f5f5f5;
            background-image: radial-gradient(circle, #d0d0d0 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        .canvas {
            width: 100%;
            height: 100%;
            position: relative;
            transform-origin: 0 0;
            transition: transform 0.1s ease;
        }
        
        .board-element {
            position: absolute;
            cursor: move;
            user-select: none;
            transition: box-shadow 0.2s;
        }
        
        .board-element:hover {
            box-shadow: 0 0 0 2px #4262ff;
        }
        
        .board-element.selected {
            box-shadow: 0 0 0 2px #4262ff;
        }
        
        .sticky-note {
            width: 200px;
            height: 200px;
            background: #ffeb3b;
            border-radius: 8px;
            padding: 16px;
            font-size: 14px;
            line-height: 1.4;
            color: #333;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .sticky-note.blue { background: #2196f3; color: white; }
        .sticky-note.green { background: #4caf50; color: white; }
        .sticky-note.pink { background: #e91e63; color: white; }
        .sticky-note.orange { background: #ff9800; color: white; }
        
        .text-box {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 12px;
            font-size: 14px;
            min-width: 150px;
            min-height: 50px;
            color: #333;
        }
        
        .shape-box {
            border: 2px solid #4262ff;
            background: rgba(66, 98, 255, 0.1);
            border-radius: 8px;
        }
        
        .shape-circle {
            border: 2px solid #4caf50;
            background: rgba(76, 175, 80, 0.1);
            border-radius: 50%;
        }
        
        .connector-line {
            stroke: #666;
            stroke-width: 2;
            fill: none;
            marker-end: url(#arrowhead);
        }
        
        .floating-toolbar {
            position: absolute;
            background: white;
            border-radius: 8px;
            padding: 8px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
            display: none;
            z-index: 200;
            gap: 4px;
        }
        
        .floating-toolbar.show {
            display: flex;
        }
        
        .floating-btn {
            width: 32px;
            height: 32px;
            border: none;
            background: none;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
            color: #666;
            transition: background 0.2s;
        }
        
        .floating-btn:hover {
            background: #f0f0f0;
        }
        
        .minimap {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 200px;
            height: 120px;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            z-index: 100;
        }
        
        .minimap-canvas {
            width: 100%;
            height: 100%;
            background: #f8f8f8;
            position: relative;
        }
        
        .minimap-element {
            position: absolute;
            border-radius: 2px;
        }
        
        .minimap-viewport {
            position: absolute;
            border: 2px solid #4262ff;
            background: rgba(66, 98, 255, 0.1);
            cursor: move;
        }
        
        .comments-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 300px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            z-index: 100;
            display: none;
            flex-direction: column;
            max-height: 400px;
        }
        
        .comments-panel.show {
            display: flex;
        }
        
        .comments-header {
            padding: 16px;
            border-bottom: 1px solid #e0e0e0;
            font-weight: 600;
            color: #333;
        }
        
        .comments-list {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }
        
        .comment-item {
            margin-bottom: 16px;
            display: flex;
            gap: 8px;
        }
        
        .comment-avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 10px;
            font-weight: 600;
            flex-shrink: 0;
        }
        
        .comment-content {
            flex: 1;
        }
        
        .comment-author {
            font-size: 12px;
            font-weight: 600;
            color: #333;
            margin-bottom: 2px;
        }
        
        .comment-text {
            font-size: 12px;
            color: #666;
            line-height: 1.4;
        }
        
        .comment-time {
            font-size: 10px;
            color: #999;
            margin-top: 4px;
        }
        
        .cursor-indicator {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            z-index: 150;
            pointer-events: none;
        }
        
        .cursor-indicator::after {
            content: attr(data-name);
            position: absolute;
            top: 16px;
            left: -10px;
            background: inherit;
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 600;
            white-space: nowrap;
        }
        
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f0f0f0;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-left">
            <div class="logo">miro</div>
            <input class="board-title" value="Product Strategy Workshop" />
        </div>
        
        <div class="header-center">
            <div class="zoom-controls">
                <button class="zoom-btn" onclick="zoomOut()">-</button>
                <div class="zoom-level" id="zoomLevel">100%</div>
                <button class="zoom-btn" onclick="zoomIn()">+</button>
            </div>
        </div>
        
        <div class="header-right">
            <button class="share-btn">Share</button>
            <div class="collaborator">SM</div>
            <div class="collaborator">JK</div>
            <div class="collaborator">AL</div>
            <div class="collaborator">+2</div>
        </div>
    </div>
    
    <div class="main-container">
        <div class="toolbar">
            <button class="tool-item active" data-tool="select" onclick="selectTool(this)">↖</button>
            <button class="tool-item" data-tool="sticky" onclick="selectTool(this)">📝</button>
            <button class="tool-item" data-tool="text" onclick="selectTool(this)">T</button>
            <div class="tool-separator"></div>
            <button class="tool-item" data-tool="rectangle" onclick="selectTool(this)">▭</button>
            <button class="tool-item" data-tool="circle" onclick="selectTool(this)">⭕</button>
            <button class="tool-item" data-tool="arrow" onclick="selectTool(this)">→</button>
            <div class="tool-separator"></div>
            <button class="tool-item" data-tool="pen" onclick="selectTool(this)">✏️</button>
            <button class="tool-item" data-tool="comment" onclick="selectTool(this)">💬</button>
        </div>
        
        <div class="canvas-container" id="canvasContainer">
            <div class="canvas" id="canvas">
                <!-- SVG for lines and arrows -->
                <svg style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
                        </marker>
                    </defs>
                    <line class="connector-line" x1="150" y1="150" x2="350" y2="300" />
                    <line class="connector-line" x1="550" y1="200" x2="750" y2="150" />
                </svg>
                
                <!-- Board elements -->
                <div class="board-element sticky-note" style="top: 100px; left: 100px;" ondblclick="editElement(this)">
                    <div contenteditable="false">💡 Key Insights<br><br>- User needs analysis<br>- Market research findings<br>- Competitive analysis</div>
                </div>
                
                <div class="board-element sticky-note blue" style="top: 100px; left: 350px;" ondblclick="editElement(this)">
                    <div contenteditable="false">🎯 Goals<br><br>- Increase user engagement<br>- Improve conversion rate<br>- Reduce churn</div>
                </div>
                
                <div class="board-element sticky-note green" style="top: 350px; left: 100px;" ondblclick="editElement(this)">
                    <div contenteditable="false">✅ Action Items<br><br>- Design user journey<br>- Create prototypes<br>- Plan user testing</div>
                </div>
                
                <div class="board-element sticky-note pink" style="top: 350px; left: 350px;" ondblclick="editElement(this)">
                    <div contenteditable="false">⚠️ Risks<br><br>- Technical constraints<br>- Resource limitations<br>- Timeline challenges</div>
                </div>
                
                <div class="board-element text-box" style="top: 50px; left: 600px; width: 250px; height: 100px;" ondblclick="editElement(this)">
                    <div contenteditable="false">Product Strategy Workshop<br>Date: Dec 25, 2025<br>Participants: Design & Product Team</div>
                </div>
                
                <div class="board-element shape-box" style="top: 200px; left: 600px; width: 150px; height: 80px;"></div>
                
                <div class="board-element shape-circle" style="top: 300px; left: 700px; width: 100px; height: 100px;"></div>
                
                <!-- Cursor indicators for other users -->
                <div class="cursor-indicator" style="background: #ff6b6b; top: 250px; left: 200px;" data-name="Sarah"></div>
                <div class="cursor-indicator" style="background: #4ecdc4; top: 180px; left: 450px;" data-name="John"></div>
            </div>
        </div>
        
        <div class="floating-toolbar" id="floatingToolbar">
            <button class="floating-btn" onclick="duplicateElement()" title="Duplicate">📋</button>
            <button class="floating-btn" onclick="changeColor()" title="Color">🎨</button>
            <button class="floating-btn" onclick="bringToFront()" title="Bring to front">⬆️</button>
            <button class="floating-btn" onclick="deleteElement()" title="Delete">🗑️</button>
        </div>
        
        <div class="minimap">
            <div class="minimap-canvas">
                <div class="minimap-element" style="background: #ffeb3b; top: 10px; left: 10px; width: 20px; height: 20px;"></div>
                <div class="minimap-element" style="background: #2196f3; top: 10px; left: 35px; width: 20px; height: 20px;"></div>
                <div class="minimap-element" style="background: #4caf50; top: 35px; left: 10px; width: 20px; height: 20px;"></div>
                <div class="minimap-element" style="background: #e91e63; top: 35px; left: 35px; width: 20px; height: 20px;"></div>
                <div class="minimap-viewport" style="top: 5px; left: 5px; width: 80px; height: 48px;"></div>
            </div>
        </div>
        
        <div class="comments-panel" id="commentsPanel">
            <div class="comments-header">
                Comments
                <button style="float: right; background: none; border: none; cursor: pointer;" onclick="toggleComments()">×</button>
            </div>
            <div class="comments-list">
                <div class="comment-item">
                    <div class="comment-avatar">SM</div>
                    <div class="comment-content">
                        <div class="comment-author">Sarah Miller</div>
                        <div class="comment-text">Great insights on the user journey! Should we also consider mobile-first approach?</div>
                        <div class="comment-time">2 hours ago</div>
                    </div>
                </div>
                <div class="comment-item">
                    <div class="comment-avatar">JK</div>
                    <div class="comment-content">
                        <div class="comment-author">John Kim</div>
                        <div class="comment-text">The action items look comprehensive. I'll start working on the prototypes next week.</div>
                        <div class="comment-time">1 hour ago</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let currentTool = 'select';
        let zoomLevel = 100;
        let selectedElement = null;
        let isDragging = false;
        let dragOffset = { x: 0, y: 0 };
        let elementCounter = 0;
        
        function selectTool(toolBtn) {
            document.querySelectorAll('.tool-item').forEach(btn => btn.classList.remove('active'));
            toolBtn.classList.add('active');
            currentTool = toolBtn.dataset.tool;
            
            // Hide floating toolbar when switching tools
            document.getElementById('floatingToolbar').classList.remove('show');
        }
        
        function zoomIn() {
            if (zoomLevel < 200) {
                zoomLevel += 25;
                updateZoom();
            }
        }
        
        function zoomOut() {
            if (zoomLevel > 25) {
                zoomLevel -= 25;
                updateZoom();
            }
        }
        
        function updateZoom() {
            const canvas = document.getElementById('canvas');
            canvas.style.transform = `scale(${zoomLevel / 100})`;
            document.getElementById('zoomLevel').textContent = zoomLevel + '%';
        }
        
        function editElement(element) {
            if (currentTool === 'select') {
                const contentDiv = element.querySelector('div[contenteditable]');
                if (contentDiv) {
                    contentDiv.contentEditable = 'true';
                    contentDiv.focus();
                    
                    contentDiv.addEventListener('blur', function() {
                        this.contentEditable = 'false';
                    });
                }
            }
        }
        
        function selectElement(element) {
            if (selectedElement) {
                selectedElement.classList.remove('selected');
            }
            
            selectedElement = element;
            element.classList.add('selected');
            
            // Show floating toolbar
            const toolbar = document.getElementById('floatingToolbar');
            const rect = element.getBoundingClientRect();
            toolbar.style.top = (rect.top - 50) + 'px';
            toolbar.style.left = rect.left + 'px';
            toolbar.classList.add('show');
        }
        
        function duplicateElement() {
            if (selectedElement) {
                const clone = selectedElement.cloneNode(true);
                const currentTop = parseInt(selectedElement.style.top);
                const currentLeft = parseInt(selectedElement.style.left);
                clone.style.top = (currentTop + 20) + 'px';
                clone.style.left = (currentLeft + 20) + 'px';
                document.getElementById('canvas').appendChild(clone);
                addElementEvents(clone);
            }
        }
        
        function changeColor() {
            if (selectedElement && selectedElement.classList.contains('sticky-note')) {
                const colors = ['', 'blue', 'green', 'pink', 'orange'];
                const currentColor = colors.find(color => selectedElement.classList.contains(color)) || '';
                const currentIndex = colors.indexOf(currentColor);
                const nextIndex = (currentIndex + 1) % colors.length;
                
                // Remove all color classes
                colors.forEach(color => selectedElement.classList.remove(color));
                
                // Add new color class
                if (colors[nextIndex]) {
                    selectedElement.classList.add(colors[nextIndex]);
                }
            }
        }
        
        function bringToFront() {
            if (selectedElement) {
                selectedElement.style.zIndex = '10';
            }
        }
        
        function deleteElement() {
            if (selectedElement) {
                selectedElement.remove();
                selectedElement = null;
                document.getElementById('floatingToolbar').classList.remove('show');
            }
        }
        
        function toggleComments() {
            const panel = document.getElementById('commentsPanel');
            panel.classList.toggle('show');
        }
        
        function addElementEvents(element) {
            element.addEventListener('mousedown', function(e) {
                if (currentTool === 'select') {
                    e.preventDefault();
                    selectElement(this);
                    isDragging = true;
                    
                    const rect = this.getBoundingClientRect();
                    dragOffset.x = e.clientX - rect.left;
                    dragOffset.y = e.clientY - rect.top;
                }
            });
        }
        
        // Canvas click handler for creating new elements
        document.getElementById('canvasContainer').addEventListener('click', function(e) {
            if (e.target === this || e.target.id === 'canvas') {
                const rect = this.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                if (currentTool === 'sticky') {
                    createStickyNote(x, y);
                } else if (currentTool === 'text') {
                    createTextBox(x, y);
                } else if (currentTool === 'rectangle') {
                    createRectangle(x, y);
                } else if (currentTool === 'circle') {
                    createCircle(x, y);
                } else if (currentTool === 'comment') {
                    toggleComments();
                }
                
                // Hide floating toolbar when clicking on canvas
                if (currentTool === 'select' && e.target === this) {
                    document.getElementById('floatingToolbar').classList.remove('show');
                    if (selectedElement) {
                        selectedElement.classList.remove('selected');
                        selectedElement = null;
                    }
                }
            }
        });
        
        function createStickyNote(x, y) {
            const note = document.createElement('div');
            note.className = 'board-element sticky-note';
            note.style.top = y + 'px';
            note.style.left = x + 'px';
            note.ondblclick = () => editElement(note);
            note.innerHTML = '<div contenteditable="false">New note</div>';
            
            document.getElementById('canvas').appendChild(note);
            addElementEvents(note);
            selectElement(note);
        }
        
        function createTextBox(x, y) {
            const textBox = document.createElement('div');
            textBox.className = 'board-element text-box';
            textBox.style.top = y + 'px';
            textBox.style.left = x + 'px';
            textBox.ondblclick = () => editElement(textBox);
            textBox.innerHTML = '<div contenteditable="false">Text box</div>';
            
            document.getElementById('canvas').appendChild(textBox);
            addElementEvents(textBox);
            selectElement(textBox);
        }
        
        function createRectangle(x, y) {
            const rect = document.createElement('div');
            rect.className = 'board-element shape-box';
            rect.style.top = y + 'px';
            rect.style.left = x + 'px';
            rect.style.width = '100px';
            rect.style.height = '60px';
            
            document.getElementById('canvas').appendChild(rect);
            addElementEvents(rect);
            selectElement(rect);
        }
        
        function createCircle(x, y) {
            const circle = document.createElement('div');
            circle.className = 'board-element shape-circle';
            circle.style.top = y + 'px';
            circle.style.left = x + 'px';
            circle.style.width = '80px';
            circle.style.height = '80px';
            
            document.getElementById('canvas').appendChild(circle);
            addElementEvents(circle);
            selectElement(circle);
        }
        
        // Mouse move handler for dragging
        document.addEventListener('mousemove', function(e) {
            if (isDragging && selectedElement) {
                const canvasRect = document.getElementById('canvasContainer').getBoundingClientRect();
                const newX = e.clientX - canvasRect.left - dragOffset.x;
                const newY = e.clientY - canvasRect.top - dragOffset.y;
                
                selectedElement.style.left = Math.max(0, newX) + 'px';
                selectedElement.style.top = Math.max(0, newY) + 'px';
                
                // Update floating toolbar position
                const toolbar = document.getElementById('floatingToolbar');
                if (toolbar.classList.contains('show')) {
                    toolbar.style.top = Math.max(0, newY - 50) + 'px';
                    toolbar.style.left = Math.max(0, newX) + 'px';
                }
            }
        });
        
        // Mouse up handler
        document.addEventListener('mouseup', function() {
            isDragging = false;
        });
        
        // Initialize events for existing elements
        document.querySelectorAll('.board-element').forEach(addElementEvents);
        
        // Simulate cursor movement for other users
        function animateCursors() {
            const cursors = document.querySelectorAll('.cursor-indicator');
            cursors.forEach(cursor => {
                const currentTop = parseInt(cursor.style.top);
                const currentLeft = parseInt(cursor.style.left);
                
                const newTop = currentTop + (Math.random() - 0.5) * 20;
                const newLeft = currentLeft + (Math.random() - 0.5) * 20;
                
                cursor.style.top = Math.max(50, Math.min(500, newTop)) + 'px';
                cursor.style.left = Math.max(50, Math.min(800, newLeft)) + 'px';
            });
        }
        
        setInterval(animateCursors, 3000);
    </script>
</body>
</html>